<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/poole_hyde.css"> <link rel=stylesheet  href="/css/sisap.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/assets/favicon.png"> <title>LAION2B Dataset</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <img alt="sisap logo" src="https://www.sisap.org/2023/images/sisap.png" /> <h1><a href="/">SISAP 2023</a></h1> <p class=lead >LAION2B challenge</p> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/">Home</a> <a class="sidebar-nav-item " href="/tasks/">Tasks</a> <a class="sidebar-nav-item " href="/evaluationmethodology/">Methodology</a> <a class="sidebar-nav-item active" href="/datasets/">Datasets</a> <a class="sidebar-nav-item " href="/ioformats/">Inputs and outputs</a> <a class="sidebar-nav-item " href="/repoexamples/">Repository examples</a> <a class="sidebar-nav-item " href="/committee">Committee and pre-registration</a> </nav> <p>&copy; sisap challenge committee.</p> </div> </div> <div class="content container"> <div class=franklin-content > <h1 id=the_laion2b_and_projections ><a href="#the_laion2b_and_projections" class=header-anchor >The LAION2B and projections</a></h1> <div class=franklin-toc ><ol><li><a href="#about_the_laion5b">About the LAION5B</a><ol><li><a href="#metadata">Metadata</a><li><a href="#subset_of_the_challenge">Subset of the challenge</a><ol><li><a href="#downloading_the_dataset">Downloading the dataset</a></ol><li><a href="#filtering_out_nsfw_to_get_the_precise_subsets">Filtering out NSFW to get the precise subsets</a></ol><li><a href="#projections">Projections</a><ol><li><a href="#some_technical_specifications_of_the_laion-5b_and_the_clip_embeddings">Some technical specifications of the LAION-5B and the CLIP embeddings</a></ol><li><a href="#32d_pca_projections">32d PCA projections</a><li><a href="#96d_pca_projections">96d PCA projections</a><li><a href="#1024-bit_binary_sketches">1024-bit binary sketches</a><li><a href="#768d-embeddings_public_dataset">768d-embeddings public dataset</a><li><a href="#gold_standard_list">Gold standard list</a><li><a href="#projections_recall_and_baseline_search_times_bruteforce">Projection&#39;s recall and baseline search times &#40;bruteforce&#41;</a></ol></div> <h2 id=about_the_laion5b ><a href="#about_the_laion5b" class=header-anchor >About the LAION5B</a></h2> <p>The <strong>LAION5B</strong> dataset is an openly available image collection that has been used for learning very large visual and language deep-neural models; for instance, the famed stable diffusion generative model used it as the training set. The collection equips each image with a URL handle, allowing people to showcase demonstrations easily.</p> <p>A more detailed description can be found here:</p> <pre><code class="julia hljs">Schuhmann, C., Beaumont, R., Vencu, R., Gordon, C., Wightman, R., Cherti, M., ... &amp; Jitsev, J. (<span class=hljs-number >2022</span>). Laion-<span class=hljs-number >5</span>b: An open large-scale dataset <span class=hljs-keyword >for</span> training next generation image-text models. arXiv preprint arXiv:<span class=hljs-number >2210.08402</span>.</code></pre>
<h3 id=metadata ><a href="#metadata" class=header-anchor >Metadata</a></h3>
<p>The metadata is publicly available through the <a href="https://laion.ai/blog/laion-5b/">LAION-5B</a> effort and the <a href="https://huggingface.co/laion">Hugging face repository</a>. Please note that the LAION-5B dataset contains many NSFW materials that were discarded.</p>
<h3 id=subset_of_the_challenge ><a href="#subset_of_the_challenge" class=header-anchor >Subset of the challenge</a></h3>
<p>The dataset is divided into parts containing close to 1M vectors. We selected the first 112 parts &#40;0000 to 0111&#41;; we used the first part to extract the public query set and the rest to extract the database. The subset use approximately 160GB of space and its associated metadata 20GB &#40;the first 112 parts&#41;. Embeddings are distributed using single precision &#40;16bits&#41; floating point vectors bundled in the NumPy data-specific format <code>.npz</code>. They can be loaded on most platforms due to the format&#39;s popularity.</p>
<p>The challenge has three subsets:</p>
<ul>
<li><p>10M subset: concatenation of 1-11 parts.</p>

<li><p>30M subset: concatenation of 1-33 parts.</p>

<li><p>100M subset: concatenation of 1-111 parts.</p>

<li><p>queries: computed from part 0.</p>

</ul>
<p>All parts should be concatenated in order and also removing NSFW entries &#40;marked in metadata files&#41;.</p>
<h4 id=downloading_the_dataset ><a href="#downloading_the_dataset" class=header-anchor >Downloading the dataset</a></h4>
<p>The embeddings are also publicly available from the original mirror site <a href="https://mystic.the-eye.eu/public/AI/cah/laion5b/embeddings/">https://mystic.the-eye.eu/public/AI/cah/laion5b/embeddings/</a>.</p>
<p>For instance, you can retrieve the first two parts &#40;and its associated meta data&#41; using a typical Linux installation using the terminal, as follows:</p>
<pre><code class="bash hljs"><span class=hljs-built_in >mkdir</span> laion2B-en
<span class=hljs-built_in >cd</span> laion2B-en

curl -O https://mystic.the-eye.eu/public/AI/cah/laion5b/embeddings/laion2B-en/img_emb/img_emb_0000.npy
curl -O https://mystic.the-eye.eu/public/AI/cah/laion5b/embeddings/laion2B-en/laion2B-en-metadata/metadata_0000.parquet
curl -O https://mystic.the-eye.eu/public/AI/cah/laion5b/embeddings/laion2B-en/img_emb/img_emb_0001.npy
curl -O https://mystic.the-eye.eu/public/AI/cah/laion5b/embeddings/laion2B-en/laion2B-en-metadata/metadata_0001.parquet</code></pre>
<p>You can download all parts using the following bash script</p>
<pre><code class="bash hljs"><span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> {0000..1111}; <span class=hljs-keyword >do</span>
    <span class=hljs-built_in >echo</span> curl -O https://mystic.the-eye.eu/public/AI/cah/laion5b/embeddings/laion2B-en/img_emb/img_emb_<span class=hljs-variable >$i</span>.npy
<span class=hljs-keyword >done</span></code></pre>
<p>Remove the <code>echo</code> command to actually start downloading.</p>
<p>Troubleshooting: You can restart and resume partial downloads adding <code>-C -</code> to the <code>curl</code> command line, as follows:</p>
<pre><code class="bash hljs">curl -C - -O https://mystic.the-eye.eu/public/AI/cah/laion5b/embeddings/laion2B-en/img_emb/img_emb_0000.npy</code></pre>
<h3 id=filtering_out_nsfw_to_get_the_precise_subsets ><a href="#filtering_out_nsfw_to_get_the_precise_subsets" class=header-anchor >Filtering out NSFW to get the precise subsets</a></h3>
<p>Each dataset part has metadata and embedding files. The medatada file is an Apache parquet table where we can find registers containing information like URL, description, and NSFW status, among other fields. Participants must use the NSFW field to obtain a mask for <em>NSFW</em> that should be used to get the desired sub-matrix. </p>
<h2 id=projections ><a href="#projections" class=header-anchor >Projections</a></h2>
<p>We encourage people to construct their entire data pipeline to handle data for indexing and searching. However, we produced three different lower-dimensional projections that can be used. In particular, we computed two PCA projections using 32 and 96 dimensions and one more projection into binary sketches designed to work with bit-level hamming distance &#40;using 1024 bits&#41;. Find below the URLs to download these bundles. </p>
<p><strong>Note</strong>: All these projections will reduce the result&#39;s quality with respect to the original embeddings &#40;see the bottom of this page for more details&#41;. We will mention the kind of input used in the rank, but the rank will be global. The original data can be downloaded from the active LAION2B mirror instead. The metadata, if needed, should also be retrieved from the LAION2B mirror.</p>
<h3 id=some_technical_specifications_of_the_laion-5b_and_the_clip_embeddings ><a href="#some_technical_specifications_of_the_laion-5b_and_the_clip_embeddings" class=header-anchor >Some technical specifications of the LAION-5B and the CLIP embeddings</a></h3>
<p>We provide different low dimensional projections packed in <code>HDF5</code>; queries and gold standards are also HDF5, i.e., <code>.h5</code> files. HDF5 can perform faster and more flexible <em>io</em>, which can help on large datasets. In particular, the sizes of the projection files are as follow:</p>

<h2 id=32d_pca_projections ><a href="#32d_pca_projections" class=header-anchor >32d PCA projections</a></h2>
<table><tr><th align=right >dataset<th align=right >description<th align=right >size<th align=right >md5<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca32/en-bundles/laion2B-en-pca32-n&#61;100M.h5">laion2B-en-pca32-n&#61;100M.h5</a><td align=right >100M subset<td align=right >13G<td align=right >6a83e337ee5e73532aa0884cf626f1ae<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca32/en-bundles/laion2B-en-pca32-n&#61;30M.h5">laion2B-en-pca32-n&#61;30M.h5</a><td align=right >30M subset<td align=right >3.7G<td align=right >3ab3b201e8aa089e4567bf1eaeb4f4a7<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca32/en-bundles/laion2B-en-pca32-n&#61;10M.h5">laion2B-en-pca32-n&#61;10M.h5</a><td align=right >10M subset<td align=right >1.3G<td align=right >8a6e7521d125ffc6c138b486e1876951<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca32/en-bundles/laion2B-en-pca32-n&#61;300K.h5">laion2B-en-pca32-n&#61;300K.h5</a><td align=right >300K subset, for developing purposes<td align=right >37M<td align=right >3c8b15e7459f813b5aebc624b16ad867<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca32/en-bundles/laion2B-en-pca32-n&#61;100K.h5">laion2B-en-pca32-n&#61;100K.h5</a><td align=right >100K subset, for developing purposes<td align=right >13M<td align=right >20faeeb7380a394b1f7a8ce15774b150<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca32/en-queries/public-queries-10k-pca32.h5">public-queries-10k-pca32.h5</a><td align=right >10k public query set for 32d PCA projection<td align=right >1.3M<td align=right >638a83185a6bd3490559531123559180</table>
<h2 id=96d_pca_projections ><a href="#96d_pca_projections" class=header-anchor >96d PCA projections</a></h2>
<table><tr><th align=right >dataset<th align=right >description<th align=right >size<th align=right >md5<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca96/en-bundles/laion2B-en-pca96-n&#61;100M.h5">laion2B-en-pca96-n&#61;100M.h5</a><td align=right >100M subset<td align=right >37G<td align=right >2eb46114b4ac4b9add106b1934858892<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca96/en-bundles/laion2B-en-pca96-n&#61;30M.h5">laion2B-en-pca96-n&#61;30M.h5</a><td align=right >30M subset<td align=right >11G<td align=right >eca407fef10ad02b67575557a96d5c1d<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca96/en-bundles/laion2B-en-pca96-n&#61;10M.h5">laion2B-en-pca96-n&#61;10M.h5</a><td align=right >10M subset<td align=right >3.7G<td align=right >b349c3e58cd3b0421643f27878066e03<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca96/en-bundles/laion2B-en-pca96-n&#61;300K.h5">laion2B-en-pca96-n&#61;300K.h5</a><td align=right >300K subset, for developing purposes<td align=right >110M<td align=right >8f3991fb4efeaa67f13ee7dc8407e1b6<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca96/en-bundles/laion2B-en-pca96-n&#61;100K.h5">laion2B-en-pca96-n&#61;100K.h5</a><td align=right >100K subset, for developing purposes<td align=right >37M<td align=right >513d2c93efa0fa225bada4b123d45f37<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/pca96/en-queries/public-queries-10k-pca96.h5">public-queries-10k-pca96.h5</a><td align=right >10k public query set for 96d PCA projection<td align=right >3.7M<td align=right >a8651dce51a13da26c65ace188d76f3e</table>
<h2 id=1024-bit_binary_sketches ><a href="#1024-bit_binary_sketches" class=header-anchor >1024-bit binary sketches</a></h2>
<table><tr><th align=right >dataset<th align=right >description<th align=right >size<th align=right >md5<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/hamming/en-bundles/laion2B-en-hamming-n&#61;100M.h5">laion2B-en-hamming-n&#61;100M.h5</a><td align=right >100M subset<td align=right >13G<td align=right >5f615332d78164158b364f886a70acea<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/hamming/en-bundles/laion2B-en-hamming-n&#61;30M.h5">laion2B-en-hamming-n&#61;30M.h5</a><td align=right >30M subset<td align=right >3.7G<td align=right >0780987241fb78aade610393f44b236f<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/hamming/en-bundles/laion2B-en-hamming-n&#61;10M.h5">laion2B-en-hamming-n&#61;10M.h5</a><td align=right >10M subset<td align=right >1.3G<td align=right >6a9c7c50b3416c411e93df0d8800aa45<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/hamming/en-bundles/laion2B-en-hamming-n&#61;300K.h5">laion2B-en-hamming-n&#61;300K.h5</a><td align=right >300K subset, for developing purposes<td align=right >37M<td align=right >afa0cfc6b959babb2c112dd35d02f8f6<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/hamming/en-bundles/laion2B-en-hamming-n&#61;100K.h5">laion2B-en-hamming-n&#61;100K.h5</a><td align=right >100K subset, for developing purposes<td align=right >13M<td align=right >b5678d5651f1c60e332797fe602b7d6b<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/hamming/en-queries/public-queries-10k-hamming.h5">public-queries-10k-hamming.h5</a><td align=right >10k public query set for 1024-bit binary sketch projection<td align=right >1.3M<td align=right >cd93f7bf61a436b5a45d0b3e1a002667</table>
<h2 id=768d-embeddings_public_dataset ><a href="#768d-embeddings_public_dataset" class=header-anchor >768d-embeddings public dataset</a></h2>
<table><tr><th align=right >dataset<th align=right >description<th align=right >size<th align=right >md5<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/public-queries/public-queries-10k.h5">public-queries-10k.h5</a><td align=right >10k public query set &#40;original 768d embeddings&#41;<td align=right >30M<td align=right >e95642c6a458431900365aa69bfdbf0f</table>
<h2 id=gold_standard_list ><a href="#gold_standard_list" class=header-anchor >Gold standard list</a></h2>
<table><tr><th align=right >dataset<th align=right >description<th align=right >size<th align=right >md5<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/public-queries/en-gold-standard-public/laion2B-en-public-gold-standard-100M.h5">laion2B-en-public-gold-standard-100M.h5</a><td align=right >100M gold standard<td align=right >7.7M<td align=right >17789f878a128df7d1693ca6fab755fd<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/public-queries/en-gold-standard-public/laion2B-en-public-gold-standard-30M.h5">laion2B-en-public-gold-standard-30M.h5</a><td align=right >30M gold standard<td align=right >7.7M<td align=right >06f2fdd419448060ca86acf6b23e64e2<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/public-queries/en-gold-standard-public/laion2B-en-public-gold-standard-10M.h5">laion2B-en-public-gold-standard-10M.h5</a><td align=right >10M gold standard<td align=right >7.7M<td align=right >d02750285783cabb04f425b61133910d<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/public-queries/en-gold-standard-public/small-laion2B-en-public-gold-standard-300K.h5">small-laion2B-en-public-gold-standard-300K.h5</a><td align=right >300K gold standard<td align=right >7.7M<td align=right >4164290dd39b8693d8bdb939d638495e<tr><td align=right ><a href="http://ingeotec.mx/~sadit/metric-datasets/LAION/SISAP23-Challenge/public-queries/en-gold-standard-public/small-laion2B-en-public-gold-standard-100K.h5">small-laion2B-en-public-gold-standard-100K.h5</a><td align=right >100K gold standard<td align=right >7.7M<td align=right >2aecc02d78884e70b4578f5c08699d91</table>

<p>two mirrors are given for these datasets, listed in the challenge site for our projections, queries, and gold-standard datasets.</p>
<h2 id=projections_recall_and_baseline_search_times_bruteforce ><a href="#projections_recall_and_baseline_search_times_bruteforce" class=header-anchor >Projection&#39;s recall and baseline search times &#40;bruteforce&#41;</a></h2>
<p>Each projection is an approximation of the original CLIP embeddings; therefore, they produce a quality reduction. For instance, we computed the upper bound recall scores &#40;using brute force&#41; for searching for the 30 nearest neighbors are:</p>

<table><tr><th align=right >data<th align=right >size<th align=right >recall<th align=right >querytime &#40;32 cores / 64 threads&#41;<tr><td align=right >hamming<td align=right >100K<td align=right >0.3278<td align=right >0.67s<tr><td align=right >pca32<td align=right >100K<td align=right >0.2896<td align=right >0.24s<tr><td align=right >pca96<td align=right >100K<td align=right >0.4948<td align=right >0.76s<tr><td align=right >hamming<td align=right >300K<td align=right >0.3052<td align=right >1.26s<tr><td align=right >pca32<td align=right >300K<td align=right >0.2567<td align=right >0.94s<tr><td align=right >pca96<td align=right >300K<td align=right >0.4733<td align=right >2.32s<tr><td align=right >hamming<td align=right >10M<td align=right >0.2649<td align=right >48.87s<tr><td align=right >pca32<td align=right >10M<td align=right >0.1955<td align=right >40.87s<tr><td align=right >pca96<td align=right >10M<td align=right >0.4222<td align=right >108.15s<tr><td align=right >hamming<td align=right >30M<td align=right >0.2587<td align=right >138.93s<tr><td align=right >pca32<td align=right >30M<td align=right >0.19<td align=right >130.32s<tr><td align=right >pca96<td align=right >30M<td align=right >0.4182<td align=right >331.13s<tr><td align=right >hamming<td align=right >100M<td align=right >0.2611<td align=right >529.8s<tr><td align=right >pca32<td align=right >100M<td align=right >0.1918<td align=right >438.09s<tr><td align=right >pca96<td align=right >100M<td align=right >0.4214<td align=right >1125.56s</table>

<p>Note that our projection models were trained with the 2d part of the LAION2B dataset &#40;i.e, id&#61;0001 with approx. 1M vectors&#41;. Other approaches may vary the resulting quality.</p>
<div class=page-foot >
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> sisap challenge committee. Last modified: February 22, 2023.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div>
    </div>  
    
    
        <script src="/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>